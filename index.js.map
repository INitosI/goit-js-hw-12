{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst loader = document.querySelector('.loader');\n\nexport const lightbox = new SimpleLightbox('.gallery a', {});\n\nconst gallery = document.querySelector('.gallery');\n\nexport function createGallery(images) {\n  const markup = images\n    .map(image => {\n      return `\n        <li class=\"gallery-item\">\n            <a href=\"${image.largeImageURL}\" class=\"gallery-link\">\n                <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" class=\"gallery-img\"/>\n            </a>\n            <ul class=\"info\">\n                <li class=\"info-item\">\n                    <b>Likes</b>\n                    ${image.likes}\n                </li>\n                <li class=\"info-item\">\n                    <b>Views</b>\n                    ${image.views}\n                </li>\n                <li class=\"info-item\">\n                    <b>Comments</b>\n                    ${image.comments}\n                </li>\n                <li class=\"info-item\">\n                    <b>Downloads</b>\n                    ${image.downloads}\n                </li>\n            </ul>\n        </li>\n        `;\n    })\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n}\n\nexport function clearGallery() {\n  gallery.innerHTML = '';\n}\n\nexport function showLoader() {\n  if (!loader) return;\n  loader.classList.remove('hidden');\n}\n\nexport function hideLoader() {\n  if (!loader) return;\n  loader.classList.add('hidden');\n}\n","import axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = import.meta.env.VITE_PIXABAY_API_KEY;\naxios.defaults.baseURL = BASE_URL;\n\naxios.defaults.params = {\n  key: API_KEY,\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n  per_page: 9,\n};\n\nexport function getImagesByQuery(query) {\n  return axios\n    .get('', {\n      params: {\n        q: query,\n      },\n    })\n    .then(response => response.data);\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport {\n  lightbox,\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n} from './js/render-functions.js';\nimport { getImagesByQuery } from './js/pixabay-api.js';\n\nconst errorToast = message => {\n  const toast = iziToast.error({\n    message,\n    position: 'topRight',\n    iconUrl: new URL('./img/err-icon.svg', import.meta.url).href,\n    color: 'red',\n    class: 'custom-toast',\n    close: false,\n  });\n\n  // Добавляем кастомный крестик\n  setTimeout(() => {\n    const toastElement = document.querySelector('.custom-toast');\n    if (toastElement && !toastElement.querySelector('.toast-close-btn')) {\n      const closeBtn = document.createElement('button');\n      closeBtn.className = 'toast-close-btn';\n      closeBtn.innerHTML = '✕';\n      closeBtn.addEventListener('click', () => {\n        const parent = closeBtn.closest('.iziToast-wrapper');\n        if (parent) parent.remove();\n      });\n\n      const body = toastElement.querySelector('.iziToast-body');\n      if (body) body.appendChild(closeBtn);\n    }\n  }, 0);\n};\n\nconst form = document.querySelector('.form');\nconst searchInput = document.querySelector('.form input');\n\nform.addEventListener('submit', event => {\n  event.preventDefault();\n  clearGallery();\n\n  if (!form.checkValidity()) {\n    errorToast(\n      'Sorry, there are no images matching your search query. Please, try again!'\n    );\n    return;\n  }\n  showLoader();\n  const searchQuery = searchInput.value.trim();\n  const getedImages = getImagesByQuery(searchQuery);\n\n  const imagesArray = [];\n  getedImages\n    .then(data => {\n      if (data.hits.length === 0) {\n        throw new Error(\n          'Sorry, there are no images matching your search query. Please try again!'\n        );\n      }\n      imagesArray.push(...data.hits);\n      createGallery(imagesArray);\n    })\n    .catch(error => {\n      errorToast(\n        'Sorry, there are no images matching your search query. Please, try again!'\n      );\n    })\n    .finally(() => {\n      hideLoader();\n    });\n\n  searchInput.value = '';\n});\n"],"names":["loader","lightbox","SimpleLightbox","gallery","createGallery","images","markup","image","clearGallery","showLoader","hideLoader","BASE_URL","API_KEY","axios","getImagesByQuery","query","response","errorToast","message","iziToast","toastElement","closeBtn","parent","body","form","searchInput","event","searchQuery","getedImages","imagesArray","data","error"],"mappings":"owBAGA,MAAMA,EAAS,SAAS,cAAc,SAAS,EAElCC,EAAW,IAAIC,EAAe,aAAc,CAAE,CAAA,EAErDC,EAAU,SAAS,cAAc,UAAU,EAE1C,SAASC,EAAcC,EAAQ,CACpC,MAAMC,EAASD,EACZ,IAAIE,GACI;AAAA;AAAA,uBAEUA,EAAM,aAAa;AAAA,4BACdA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA,sBAK5CA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,sBAIXA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,sBAIXA,EAAM,QAAQ;AAAA;AAAA;AAAA;AAAA,sBAIdA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA,SAKhC,EACA,KAAK,EAAE,EAEVJ,EAAQ,mBAAmB,YAAaG,CAAM,EAC9CL,EAAS,QAAO,CAClB,CAEO,SAASO,GAAe,CAC7BL,EAAQ,UAAY,EACtB,CAEO,SAASM,GAAa,CACtBT,GACLA,EAAO,UAAU,OAAO,QAAQ,CAClC,CAEO,SAASU,GAAa,CACtBV,GACLA,EAAO,UAAU,IAAI,QAAQ,CAC/B,CCtDA,MAAMW,EAAW,2BACXC,EAAU,qCAChBC,EAAM,SAAS,QAAUF,EAEzBE,EAAM,SAAS,OAAS,CACtB,IAAKD,EACL,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,CACZ,EAEO,SAASE,EAAiBC,EAAO,CAC/B,OAAAF,EACJ,IAAI,GAAI,CACP,OAAQ,CACN,EAAGE,CACL,CACD,CAAA,EACA,KAAKC,GAAYA,EAAS,IAAI,CACnC,CCXA,MAAMC,EAAaC,GAAW,CACdC,EAAS,MAAM,CAC3B,QAAAD,EACA,SAAU,WACV,QAAS,IAAA,IAAA,ssFAAA,YAAA,GAAA,EAA+C,KACxD,MAAO,MACP,MAAO,eACP,MAAO,EACX,CAAG,EAGD,WAAW,IAAM,CACf,MAAME,EAAe,SAAS,cAAc,eAAe,EAC3D,GAAIA,GAAgB,CAACA,EAAa,cAAc,kBAAkB,EAAG,CACnE,MAAMC,EAAW,SAAS,cAAc,QAAQ,EAChDA,EAAS,UAAY,kBACrBA,EAAS,UAAY,IACrBA,EAAS,iBAAiB,QAAS,IAAM,CACvC,MAAMC,EAASD,EAAS,QAAQ,mBAAmB,EAC/CC,GAAQA,EAAO,QAC3B,CAAO,EAED,MAAMC,EAAOH,EAAa,cAAc,gBAAgB,EACpDG,GAAMA,EAAK,YAAYF,CAAQ,CACpC,CACF,EAAE,CAAC,CACN,EAEMG,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAc,SAAS,cAAc,aAAa,EAExDD,EAAK,iBAAiB,SAAUE,GAAS,CAIvC,GAHAA,EAAM,eAAc,EACpBlB,IAEI,CAACgB,EAAK,gBAAiB,CACzBP,EACE,2EACN,EACI,MACD,CACDR,IACA,MAAMkB,EAAcF,EAAY,MAAM,KAAI,EACpCG,EAAcd,EAAiBa,CAAW,EAE1CE,EAAc,CAAA,EACpBD,EACG,KAAKE,GAAQ,CACZ,GAAIA,EAAK,KAAK,SAAW,EACvB,MAAM,IAAI,MACR,0EACV,EAEMD,EAAY,KAAK,GAAGC,EAAK,IAAI,EAC7B1B,EAAcyB,CAAW,CAC/B,CAAK,EACA,MAAME,GAAS,CACdd,EACE,2EACR,CACA,CAAK,EACA,QAAQ,IAAM,CACbP,GACN,CAAK,EAEHe,EAAY,MAAQ,EACtB,CAAC"}